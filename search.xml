<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>nest.jså­¦ä¹ ç¬”è®°</title>
    <url>/2024/06/20/nest.3/</url>
    <content><![CDATA[<h2 id="å­¦ä¹ ç¬”è®°"><a href="#å­¦ä¹ ç¬”è®°" class="headerlink" title="å­¦ä¹ ç¬”è®°"></a>å­¦ä¹ ç¬”è®°</h2><ul>
<li>1.vscodeè°ƒè¯•nodeï¼Œ</li>
<li>2.dotenv &amp; @nest&#x2F;configé…ç½®</li>
</ul>
<h2 id="1-è°ƒè¯•"><a href="#1-è°ƒè¯•" class="headerlink" title="1 è°ƒè¯•"></a>1 è°ƒè¯•</h2><div class="highlight-container" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  </span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Launch via NPM&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;runtimeArgs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;run-script&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;debug&quot;</span><span class="comment">//è¿™ä¸€å—åœ¨package.jsonä¸­è¿›è¡ŒæŸ¥æ‰¾</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;runtimeExecutable&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;runtimeVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;18.17.0&quot;</span><span class="punctuation">,</span><span class="comment">//æ ¹æ®æœ¬åœ°nodeç‰ˆæœ¬è®¾ç½®</span></span><br><span class="line">        <span class="attr">&quot;internalConsoleOptions&quot;</span><span class="punctuation">:</span> <span class="string">&quot;neverOpen&quot;</span><span class="punctuation">,</span><span class="comment">//è¿™ä¸€å—æ˜¯é˜²æ­¢å¤šæ¬¡æ‰“å°</span></span><br><span class="line">        <span class="attr">&quot;skipFiles&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;&lt;node_internals&gt;/**&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="2-dotenv-nest-configé…ç½®"><a href="#2-dotenv-nest-configé…ç½®" class="headerlink" title="2 dotenv &amp; @nest&#x2F;configé…ç½®"></a>2 dotenv &amp; @nest&#x2F;configé…ç½®</h2><h3 id="2-1-dotenv"><a href="#2-1-dotenv" class="headerlink" title="2.1  dotenv"></a>2.1  dotenv</h3><p>ä¸€ä¸ªé›¶ä¾èµ–çš„æ¨¡å—ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯ä».envæ–‡ä»¶ä¸­åŠ è½½ç¯å¢ƒå˜é‡ï¼Œä»è€Œè¯»å–ä¸åŒçš„æ•°æ®åº“ã€‚</br></p>
<h4 id="å¦‚ä½•ä½¿ç”¨ï¼š"><a href="#å¦‚ä½•ä½¿ç”¨ï¼š" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ï¼š"></a>å¦‚ä½•ä½¿ç”¨ï¼š</h4><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„é¡¹ç›®ä¸­å®‰è£…dotenvã€‚ä½ å¯ä»¥é€šè¿‡npmæˆ–è€…yarnæ¥å®‰è£…ã€‚ä»¥ä¸‹æ˜¯å®‰è£…å‘½ä»¤ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä½¿ç”¨npm</span><br><span class="line">npm install dotenv</span><br><span class="line"># ä½¿ç”¨yarn</span><br><span class="line">yarn add dotenv</span><br><span class="line"># åœ¨å…¥å£æ–‡ä»¶ä¸­</span><br><span class="line">require(&#x27;dotenv&#x27;).config();// å¼•å…¥dotenvæ¨¡å—</span><br></pre></td></tr></table></figure></div>
<h3 id="2-2-nest-jsä¸­çš„configæ¨¡å—"><a href="#2-2-nest-jsä¸­çš„configæ¨¡å—" class="headerlink" title="2.2  nest.jsä¸­çš„configæ¨¡å—"></a>2.2  nest.jsä¸­çš„configæ¨¡å—</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">//npm i --save @nestjs/config æ–°å»º.envæ–‡ä»¶</span><br><span class="line">//å®‰è£…è¿‡åè¿›è¡Œå¯¼å…¥</span><br><span class="line"></span><br><span class="line">import &#123; Module &#125; from &#x27;@nestjs/common&#x27;;</span><br><span class="line">import &#123; ConfigModule &#125; from &#x27;@nestjs/config&#x27;;</span><br><span class="line">//ConfigModule.forRoot()å¯ä»¥åŠ å±æ€§globalè¿›è¡Œå…¨å±€ä½¿ç”¨</span><br><span class="line">@Module(&#123;</span><br><span class="line">  imports: [ConfigModule.forRoot()],</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123;&#125;</span><br></pre></td></tr></table></figure></div>
<p>è¿›é˜¶æ–¹æ¡ˆï¼Œåœ¨æ ¹ç›®å½•æ–°å»ºconfigæ–‡ä»¶å¤¹å†æ–°å»ºconfig.ymlæ–‡ä»¶ï¼Œåœ¨srcæ–‡ä»¶ä¸‹æ–°å»ºconfiguration</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.åœ¨configuration.tsä¸­</span><br><span class="line">import &#123; readFileSync &#125; from &#x27;fs&#x27;;</span><br><span class="line">import * as yaml from &#x27;js-yaml&#x27;;</span><br><span class="line">import &#123; join &#125; from &#x27;path&#x27;;</span><br><span class="line">const env = process.env.NODE_ENV;</span><br><span class="line"></span><br><span class="line">const YAML_CONFIG_NAME = `$&#123;env == &#x27;development&#x27; || env == undefined ? &#x27;development&#x27; : &#x27;production&#x27;&#125;.config.yml`;</span><br><span class="line">const filepath = join(__dirname, &#x27;../config&#x27;, YAML_CONFIG_NAME);</span><br><span class="line"></span><br><span class="line">//å› ä¸ºconfigModuleçš„loadæ˜¯éœ€è¦å¯¼å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°</span><br><span class="line">export default (): any =&gt; &#123;</span><br><span class="line">  return yaml.load(readFileSync(filepath, &#x27;utf8&#x27;));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">2.åœ¨app.module.tsä¸­</span><br><span class="line">import configuration from &#x27;./configuration&#x27;;</span><br><span class="line"></span><br><span class="line">  imports: [</span><br><span class="line">    UserModule,</span><br><span class="line">    ConfigModule.forRoot(&#123;</span><br><span class="line">      isGlobal: true,</span><br><span class="line">      load: [configuration],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure></div>
<blockquote>
<p>é—®é¢˜è®°å½•ï¼šåœ¨ä¸Šè¿°é…ç½®å®Œæˆåè¿›è¡Œå¯åŠ¨é¡¹ç›®ï¼Œå¦‚æœæ˜¯æŒ‰cliæ¶æ„å½¢æˆçš„ï¼Œä¼šå‘ç°process.env.NODE_ENVä¸ºundefinedï¼Œ<br>è¿™æ—¶å€™åœ¨package.jsonä¸­å¯åŠ¨é¡¹åé¢åŠ  NODE_ENV&#x3D;development;å†å¯åŠ¨è¿˜æ˜¯ä¸å¯ä»¥çš„è¯ï¼Œå»ºè®®å®‰è£…<a class="link"   href="https://www.npmjs.com/package/cross-env" >across env <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ã€‚å¦‚æœè¿˜æ˜¯æ‰“å°ä¸ºç©ºï¼Œæ­¤æ—¶æŸ¥çœ‹nest å¯åŠ¨é¡¹æ˜¯å¦ä¸ºnest buildå†å¯åŠ¨çš„ã€‚æ­¤æ—¶å†å¯åŠ¨ä¼šå‘ç°ç«¯å£å ç”¨ï¼Œè¿™æ—¶å€™æ‰“å¼€cmdæŸ¥æ‰¾ç«¯å£æ˜¯å¦å ç”¨ä¸¤ä¸ªï¼Œå†çœ‹é…ç½®é¡¹æ˜¯å¦ä¸ºçƒ­é‡è½½ï¼Œå…³é—­çƒ­é‡è½½ä»¥åé‡æ–°å¯åŠ¨ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>nodeå­¦ä¹ ç¬”è®°3</category>
      </categories>
  </entry>
  <entry>
    <title>æ¬¢è¿å…‰ä¸´~</title>
    <url>/2024/05/29/first/</url>
    <content><![CDATA[<h1 id="å¿«é€Ÿäº†è§£"><a href="#å¿«é€Ÿäº†è§£" class="headerlink" title="å¿«é€Ÿäº†è§£"></a>å¿«é€Ÿäº†è§£</h1><p> ğŸ’¯åšå®¢ç†å¿µ: è®°å½•ï¼Œå­¦ä¹ ï¼Œæœ‰è¿›æ­¥~ <br/><br> 1ï¸âƒ£è‹±æ–‡åï¼šLeslie Shi             <br/><br> 2ï¸âƒ£åœ°ç‚¹ï¼šShanghai <br/><br> 3ï¸âƒ£èŒä¸šï¼šå‰ç«¯å¼€å‘ <br/><br> 4ï¸âƒ£çˆ±å¥½ï¼šæ‰“æ¸¸æˆï¼Œæ—…è¡Œ <br/></p>
]]></content>
      <categories>
        <category>ç®€ä»‹</category>
      </categories>
  </entry>
  <entry>
    <title>nest.jså­¦ä¹ ç¬”è®°</title>
    <url>/2024/06/03/nest/</url>
    <content><![CDATA[<blockquote>
<p>ä¸€ç›´æƒ³ç³»ç»Ÿå­¦ä¹ ä¸€ä¸ªnodeçš„æ¡†æ¶ï¼Œä¹‹å‰æœ‰å†™è¿‡ä¸€ä¸ªegg.jsçš„è€ƒå‹¤ï¼Œå› ä¸ºtsçš„ä½¿ç”¨è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥æƒ³æ¢ä¸ªæ–°çš„æ¡†æ¶è¿›è¡Œå­¦ä¹ ã€‚ <br/> </p>
</blockquote>
<h2 id="1-æ¡†æ¶"><a href="#1-æ¡†æ¶" class="headerlink" title="1.æ¡†æ¶"></a>1.æ¡†æ¶</h2><p>&nbsp; &nbsp; Nest.jsã€Egg.js å’Œ Koa éƒ½æ˜¯åŸºäº Node.js çš„æœåŠ¡ç«¯æ¡†æ¶ï¼Œä½†å®ƒä»¬çš„è®¾è®¡å’Œä½¿ç”¨åœºæ™¯æœ‰æ‰€ä¸åŒã€‚</p>
<h3 id="1-1-Nest-js"><a href="#1-1-Nest-js" class="headerlink" title="1.1 Nest.js"></a>1.1 Nest.js</h3><p>&nbsp; &nbsp; ç»“åˆäº†é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰å’Œå‡½æ•°å¼ååº”å¼ç¼–ç¨‹ï¼ˆFRPï¼‰çš„æ¦‚å¿µï¼Œæä¾›äº†ç»“æ„åŒ–å’Œæ¨¡å—åŒ–çš„é¡¹ç›®ç»“æ„ã€‚Nest è‡ªå¸¦äº†ä¸€äº›åŸºæœ¬åŠŸèƒ½ï¼Œå¦‚ä¾èµ–æ³¨å…¥ã€è£…é¥°å™¨ã€ä»¥åŠå¯¹ Express å’Œ GraphQL çš„æ”¯æŒ,å¯æ‰©å±•çš„å¾®æœåŠ¡å’Œä¼ä¸šçº§åº”ç”¨ã€‚<br/><br>&nbsp; &nbsp;é€‚åˆæ„å»ºå¤§å‹ã€ç»“æ„åŒ–çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯é‚£äº›éœ€è¦ä¸¥æ ¼ä»£ç ç»„ç»‡å’Œé«˜å¯ç»´æŠ¤æ€§çš„é¡¹ç›®ã€‚</p>
<h3 id="1-2-egg-js"><a href="#1-2-egg-js" class="headerlink" title="1.2 egg.js"></a>1.2 egg.js</h3><p>&nbsp; &nbsp; åŸºäº Koaï¼Œæä¾›äº†æ›´å¤šçš„å¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ’ä»¶ç³»ç»Ÿã€å‘½ä»¤è¡Œå·¥å…·ã€é…ç½®ç®¡ç†ã€æ—¥å¿—å¤„ç†ç­‰ã€‚<br/><br>&nbsp; &nbsp;é€‚åˆä¸­å¤§å‹ä¼ä¸šåº”ç”¨ï¼Œå°¤å…¶æ˜¯éœ€è¦å¿«é€Ÿæ­å»ºç¨³å®šã€å¯æ‰©å±•çš„åŸºç¡€æ¶æ„çš„æƒ…å†µã€‚</p>
<h3 id="1-3-Koa-js"><a href="#1-3-Koa-js" class="headerlink" title="1.3 Koa.js"></a>1.3 Koa.js</h3><p>&nbsp; &nbsp; é€šè¿‡ä½¿ç”¨ ES6 çš„ç‰¹æ€§ï¼ˆå¦‚ç”Ÿæˆå™¨æˆ– async&#x2F;awaitï¼‰æ¥ç®€åŒ–å¼‚æ­¥å¤„ç†ï¼Œå¹¶ä¸”ä¸å†…ç½®ä»»ä½•ä¸­é—´ä»¶ï¼Œæä¾›äº†ä¸€ä¸ªå¹²å‡€çš„ã€æ— åè§çš„åŸºç¡€ï¼Œè®©å¼€å‘è€…è‡ªç”±é€‰æ‹©éœ€è¦çš„ç»„ä»¶ã€‚<br/><br>&nbsp; &nbsp;é€‚åˆå¿«é€Ÿå¼€å‘åŸå‹ã€å°å‹åº”ç”¨æˆ–è€…éœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„é¡¹ç›®ã€‚</p>
]]></content>
      <categories>
        <category>nodeå­¦ä¹ ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>nest.jså­¦ä¹ ç¬”è®°2</title>
    <url>/2024/06/13/nest2/</url>
    <content><![CDATA[<h2 id="nest-jså­¦ä¹ ç¬”è®°2"><a href="#nest-jså­¦ä¹ ç¬”è®°2" class="headerlink" title="nest.jså­¦ä¹ ç¬”è®°2"></a>nest.jså­¦ä¹ ç¬”è®°2</h2><blockquote>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="https://nestjs.inode.club/assets/Components_1.png"
                      alt="ä¾èµ–é¡¹æ³¨å…¥å›¾ç¤º"
                ></p>
</blockquote>
<div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹äºmoudleçš„ç¬”è®°ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºçš„æ ¹æ¨¡å—è¡ç”Ÿå­æ¨¡å—ï¼Œ</span></span><br><span class="line"><span class="comment">//åº”ç”¨ç¨‹åºï¼Œç”Ÿæˆçš„æ¶æ„å°†ä½¿ç”¨å¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å°è£…äº†ä¸€ç»„ç´§å¯†ç›¸å…³çš„åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Module</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppController</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.controller&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./user/user.module&#x27;</span>;</span><br><span class="line"><span class="comment">//æ–°å»ºæ¨¡å—æ³¨å…¥moduleçš„è¯ï¼Œå¦‚ä¸‹</span></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  <span class="comment">//æ­¤å¤„</span></span><br><span class="line">  <span class="attr">imports</span>: [<span class="title class_">UserModule</span>],<span class="comment">//å¯¼å‡ºæ­¤æ¨¡å—æ‰€éœ€çš„æä¾›ç¨‹åºçš„å¯¼å…¥æ¨¡å—åˆ—è¡¨.</span></span><br><span class="line">  <span class="attr">controllers</span>: [<span class="title class_">AppController</span>],<span class="comment">//æ­¤æ¨¡å—ä¸­å®šä¹‰çš„å¿…é¡»å®ä¾‹åŒ–çš„æ§åˆ¶å™¨é›†.</span></span><br><span class="line">  <span class="attr">providers</span>: [<span class="title class_">AppService</span>],<span class="comment">//æ³¨å…¥å™¨å®ä¾‹åŒ–å¹¶ä¸”è‡³å°‘å¯ä»¥åœ¨è¯¥æ¨¡å—ä¸­å…±äº«çš„æä¾›ç¨‹åºäº«ã€‚</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h3 id="1-1-service-æœåŠ¡"><a href="#1-1-service-æœåŠ¡" class="headerlink" title="1.1 service(æœåŠ¡)"></a>1.1 service(æœåŠ¡)</h3><ul>
<li>1.å…ˆåˆ›å»ºuser.service.tsï¼›</li>
<li>2.<code>import &#123; CreateUserDto &#125; from &#39;./dto/create-user.dto&#39;;</code>è¿™ä¸ªä¸Šä¸€ç¯‡çš„2.2 è¯·æ±‚è´Ÿè½½å†…æœ‰ä»‹ç»ï¼›</br>
<div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@Injectable()è£…é¥°å™¨ =&gt;å£°æ˜UsersServiceæ˜¯ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">//å¯ä»¥ç”±Nest IoCå®¹å™¨ç®¡ç†çš„ç±»ã€‚</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="comment">//è¯·æ±‚è´Ÿè½½</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CreateUserDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./dto/create-user.dto&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="comment">//è¯¥ç±»æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¼šåœ¨Controllerä¸­ä½¿ç”¨ã€‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="title class_">Person</span>: <span class="title class_">CreateUserDto</span>[] = [];</span><br><span class="line">  <span class="title function_">create</span>(<span class="params">userinfo: CreateUserDto</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">Person</span>.<span class="title function_">push</span>(userinfo);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">Person</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">findOne</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="variable language_">this</span>.<span class="property">Person</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item: CreateUserDto</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> item.<span class="property">name</span> === name;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
åœ¨Controllerä¸­ä½¿ç”¨
<div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">Body</span>,</span><br><span class="line">  <span class="title class_">Controller</span>,</span><br><span class="line">  <span class="title class_">Get</span>,</span><br><span class="line">  <span class="title class_">Param</span>,</span><br><span class="line">  <span class="title class_">Post</span>,</span><br><span class="line">  <span class="comment">// Delete,</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./user.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CreateUserDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./dto/create-user.dto&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">  <span class="comment">//é€šè¿‡ç±»æ„é€ å‡½æ•°æ³¨å…¥çš„ã€‚ä½¿ç”¨privateè¯­æ³•</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> userService: UserService</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Post</span>(<span class="string">&#x27;/add&#x27;</span>)</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">create</span>(<span class="params"><span class="meta">@Body</span>() createUserDto: CreateUserDto</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">create</span>(createUserDto);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      res,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&#x27;/findOne&#x27;</span>)</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">findOne</span>(<span class="params"><span class="meta">@Param</span>() id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">findOne</span>(id);</span><br><span class="line">    <span class="keyword">if</span> (res) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        res,</span><br><span class="line">        <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">400</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;fail&#x27;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></li>
</ul>
<h2 id="2-çƒ­é‡è½½é—®é¢˜"><a href="#2-çƒ­é‡è½½é—®é¢˜" class="headerlink" title="2 çƒ­é‡è½½é—®é¢˜"></a>2 çƒ­é‡è½½é—®é¢˜</h2><blockquote>
<p>æ¯æ¬¡æ›´æ–°æˆ–è€…ç¼–å†™ä»£ç å¯¹typeScriptè¿›è¡Œé‡æ–°ç¼–è¯‘ï¼Œå¯¹å¼€å‘æ¨¡å¼å¾ˆä¸å‹å¥½ï¼Œå¯ä»¥é€šè¿‡webpackçš„HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰è¿›è¡Œç®€åŒ–è¿­ä»£ã€‚<br>ä¸¤ç§æƒ…å†µï¼š<br>1.ç”¨nest cli,</p>
</blockquote>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">å®‰è£…</span><br><span class="line">npm i --save-dev webpack-node-externals run-script-webpack-plugin webpack</span><br></pre></td></tr></table></figure></div>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º webpack-hmr.config.js çš„æ–‡ä»¶</p>
<div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nodeExternals = <span class="built_in">require</span>(<span class="string">&#x27;webpack-node-externals&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">RunScriptWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;run-script-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">options, webpack</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...options,</span><br><span class="line">    <span class="attr">entry</span>: [<span class="string">&#x27;webpack/hot/poll?100&#x27;</span>, options.<span class="property">entry</span>],</span><br><span class="line">    <span class="attr">externals</span>: [</span><br><span class="line">      <span class="title function_">nodeExternals</span>(&#123;</span><br><span class="line">        <span class="attr">allowlist</span>: [<span class="string">&#x27;webpack/hot/poll?100&#x27;</span>],</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      ...options.<span class="property">plugins</span>,</span><br><span class="line">      <span class="keyword">new</span> webpack.<span class="title class_">HotModuleReplacementPlugin</span>(),</span><br><span class="line">      <span class="keyword">new</span> webpack.<span class="title class_">WatchIgnorePlugin</span>(&#123;</span><br><span class="line">        <span class="attr">paths</span>: [<span class="regexp">/\.js$/</span>, <span class="regexp">/\.d\.ts$/</span>],</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">RunScriptWebpackPlugin</span>(&#123; <span class="attr">name</span>: options.<span class="property">output</span>.<span class="property">filename</span>, <span class="attr">autoRestart</span>: <span class="literal">false</span> &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<p>ä¹‹ååœ¨main.jsä¸­</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">declare const module: any;</span><br><span class="line"></span><br><span class="line">async function bootstrap() &#123;</span><br><span class="line">  const app = await NestFactory.create(AppModule);</span><br><span class="line">  await app.listen(3000);</span><br><span class="line"></span><br><span class="line">  if (module.hot) &#123;</span><br><span class="line">    module.hot.accept();</span><br><span class="line">    module.hot.dispose(() =&gt; app.close());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">bootstrap();</span><br></pre></td></tr></table></figure></div>
<p>åœ¨pakeage.jsonä¸­æ›´æ–°å˜é‡</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;dev&quot;: &quot;nest build --webpack --webpackPath webpack-hmr.config.js --watch&quot;,</span><br></pre></td></tr></table></figure></div>
<p>åé‡æ–°å¯åŠ¨ç»ˆç«¯æ˜¾ç¤ºä¸º</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">webpack 5.90.1 compiled successfully in 5534 ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:28     LOG [NestFactory] Starting Nest application...</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [InstanceLoader] AppModule dependencies initialized +15ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [InstanceLoader] UserModule dependencies initialized +0ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [RoutesResolver] AppController &#123;/api&#125;: +10ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [RouterExplorer] Mapped &#123;/api, GET&#125; route +4ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [RouterExplorer] Mapped &#123;/api/test, GET&#125; route +1ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [RoutesResolver] UserController &#123;/api/user&#125;: +1ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [RouterExplorer] Mapped &#123;/api/user/add, POST&#125; route +1ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [RouterExplorer] Mapped &#123;/api/user/findOne, GET&#125; route +0ms</span><br><span class="line">[Nest] 7700  - 2024å¹´06æœˆ13æ—¥ ä¸‹åˆ4:51:29     LOG [NestApplication] Nest application successfully started +5ms</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>nodeå­¦ä¹ ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>nest.jså­¦ä¹ ç¬”è®°1</title>
    <url>/2024/06/06/nest_1/</url>
    <content><![CDATA[<h2 id="1-nest-jså­¦ä¹ ç¬”è®°"><a href="#1-nest-jså­¦ä¹ ç¬”è®°" class="headerlink" title="1 nest.jså­¦ä¹ ç¬”è®°"></a>1 nest.jså­¦ä¹ ç¬”è®°</h2><h2 id="1-1-å®‰è£…"><a href="#1-1-å®‰è£…" class="headerlink" title="1.1 å®‰è£…"></a>1.1 å®‰è£…</h2><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">- Node.jsï¼ˆç‰ˆæœ¬ &gt;= 16ï¼‰</span><br><span class="line">- npm i -g @nestjs/cli </span><br><span class="line">- nest new project-name --strict //åŠ strictç”Ÿæˆtsæ¨¡ç‰ˆ</span><br><span class="line">- è¦é¿å…ç”Ÿæˆæµ‹è¯•æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨--no-specæ ‡å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šnest g resource users --no-spec</span><br><span class="line">- å¦‚å®‰è£…åæŠ¥Delete `â` eslint(prettier/prettier) =&gt; yarn run lint --fix</span><br></pre></td></tr></table></figure></div>
<h3 id="1-1-æ–‡ä»¶åç§°æ¦‚è¦"><a href="#1-1-æ–‡ä»¶åç§°æ¦‚è¦" class="headerlink" title="1.1 æ–‡ä»¶åç§°æ¦‚è¦"></a>1.1 æ–‡ä»¶åç§°æ¦‚è¦</h3><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="code"><pre><span class="line">- app.controller.ts  //å•ä¸€è·¯ç”±çš„åŸºæœ¬æ§åˆ¶å™¨</span><br><span class="line">- app.controller.spec.ts  //æ§åˆ¶å™¨çš„å•å…ƒæµ‹è¯•</span><br><span class="line">- app.module.ts  //åº”ç”¨ç¨‹åºçš„æ ¹æ¨¡å—.</span><br><span class="line">- app.service.ts  //åŸºæœ¬æœåŠ¡</span><br><span class="line">- main.ts //å…¥å£æ–‡ä»¶</span><br></pre></td></tr></table></figure></div>
<h3 id="1-2-main-ts"><a href="#1-2-main-ts" class="headerlink" title="1.2 main.ts"></a>1.2 main.ts</h3><div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NestFactory</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/core&#x27;</span>;</span><br><span class="line"><span class="comment">// å¯¼å…¥æ ¸å¿ƒç±»,è®¿é—®create</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.module&#x27;</span>;</span><br><span class="line"><span class="comment">// AppModule æ˜¯åº”ç”¨ç¨‹åºçš„æ¨¡å—ç±»ï¼Œå®ƒå®šä¹‰äº†åº”ç”¨ç¨‹åºçš„ä¾èµ–å’Œç»„ä»¶ã€‚</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">await</span> <span class="title class_">NestFactory</span>.<span class="title function_">create</span>(<span class="title class_">AppModule</span>);</span><br><span class="line">  <span class="comment">//å¯ä»¥åœ¨main.tsä¸­æ·»åŠ é…ç½®ï¼Œæä¾›å…¨å±€çš„è¯·æ±‚å‰ç¼€ï¼ŒåŠ è¿‡æ­¤å¤„ï¼Œæ‰€æœ‰è·¯ç”±éƒ½ä¼šåŠ ä¸Šv1å‰ç¼€</span></span><br><span class="line">  app.<span class="title function_">setGlobalPrefix</span>(<span class="string">&#x27;v1&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> app.<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç„¶åï¼Œä½¿ç”¨ await app.listen(3000) å¯åŠ¨åº”ç”¨ç¨‹åºç›‘å¬å™¨ï¼Œå¹¶åœ¨ç«¯å£ 3000 ä¸Šç­‰å¾…è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="title function_">bootstrap</span>();</span><br></pre></td></tr></table></figure></div>

<h2 id="2-æ§åˆ¶å™¨"><a href="#2-æ§åˆ¶å™¨" class="headerlink" title="2 æ§åˆ¶å™¨"></a>2 æ§åˆ¶å™¨</h2><p>&nbsp;&nbsp;æ§åˆ¶å™¨æ˜¯æ¥æ”¶åº”ç”¨ç¨‹åºçš„ç‰¹å®šè¯·æ±‚ã€‚<br /><br>&nbsp;&nbsp;æ¯ä¸ªæ§åˆ¶å™¨çš„å¯ä»¥æœ‰å¤šä¸ªè·¯ç”±ï¼Œåœ¨ä¸åŒçš„è·¯ç”±å†…å®ç°ä¸åŒçš„æ“ä½œã€‚ï¼ˆåœ¨egg.jsä¸­æ˜¯å¯ä»¥è°ƒç”¨serviceæˆ–è€…è·å–ctxä¸­çš„paramsç­‰æ•°æ®ï¼Œå†è¿”å›æ•°æ®ã€‚ï¼‰</p>
<blockquote>
<p>å¿«é€Ÿåˆ›å»ºå¸¦æœ‰CRUDæ§åˆ¶å™¨ï¼Œä½¿ç”¨CLIçš„CRUDç”Ÿæˆå™¨ï¼šnest g resource [name]ã€‚</p>
</blockquote>
<p>Tips(ç”Ÿæˆçš„æ§åˆ¶å™¨é€‰é¡¹)ï¼š<br /><br>   ç”Ÿæˆçš„æœåŠ¡ç±»ä¸ç»‘å®šåˆ°ä»»ä½•ç‰¹å®šçš„ORMï¼ˆæˆ–æ•°æ®æºï¼‰ï¼ŒåŠ â€“no-specæ ‡å¿—å¯ä»¥é¿å…ç”Ÿæˆæµ‹è¯•æ–‡ä»¶</p>
<ol>
<li>REST.api &#x3D;&gt;  ä¸ºæ‰€æœ‰ CRUD é€‰é¡¹ï¼ˆREST API çš„è·¯ç”±ã€GraphQL çš„æŸ¥è¯¢å’Œçªå˜ã€å¾®æœåŠ¡å’Œ WebSocket ç½‘å…³çš„æ¶ˆæ¯è®¢é˜…ï¼‰åˆ›å»ºå ä½ç¬¦ï¼Œå¦‚ä¸‹.<div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å·ä¸ªæ‡’åœ¨ä»£ç å—è¿›è¡Œç¬”è®°</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Controller</span>,<span class="title class_">Get</span>,<span class="title class_">Post</span>,<span class="title class_">Body</span>,<span class="title class_">Patch</span>,<span class="title class_">Param</span>,<span class="title class_">Delete</span>,&#125; <span class="keyword">from</span> <span class="string">&#x27;@nestjs/common&#x27;</span>;</span><br><span class="line"><span class="comment">//è£…é¥°å™¨</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserService</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./user.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CreateUserDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./dto/create-user.dto&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UpdateUserDto</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./dto/update-user.dto&#x27;</span>;</span><br><span class="line"><span class="comment">//è£…é¥°å™¨ ï¼Œåœ¨æ­¤ä¿®é¥°åï¼Œè¯·æ±‚http://localhost:3000/userï¼Œå³è®¿é—®æ­¤è·¯ç”±ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ä¿®é¥°å¦‚ï¼š ab*cd</span></span><br><span class="line"><span class="comment">// å­åŸŸè·¯ç”±ï¼Œä½¿ç”¨hosté€‰é¡¹ï¼Œä»¥è¦æ±‚ä¼ å…¥è¯·æ±‚çš„HTTPä¸»æœºä¸æŸä¸ªç‰¹å®šå€¼åŒ¹é…</span></span><br><span class="line"><span class="comment">//@Controller(&#123; host: &#x27;www.baidu.com&#x27; &#125;)</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> <span class="keyword">readonly</span> userService: UserService</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Post</span>()</span><br><span class="line">  <span class="comment">//çŠ¶æ€ç ï¼Œæ­£å¸¸çš„è¯·æ±‚é»˜è®¤ä¸º200ï¼ŒPOSTè¯·æ±‚çš„çŠ¶æ€ç ä¸º201ã€‚åœ¨æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼ŒçŠ¶æ€ç ä¸æ˜¯é™æ€çš„ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šåº“è¿›è¡Œç›¸åº”ï¼Œä½¿ç”¨@Res()è¿›è¡Œæ³¨å…¥ï¼Œ</span></span><br><span class="line"><span class="comment">//æˆ–è€…æŠ›å‡ºé”™è¯¯ï¼Œthrow error; // æŠ›å‡ºä¹‹å‰å®šä¹‰çš„å€¼ï¼ˆä¾‹å¦‚ï¼Œåœ¨ catch å—ä¸­ï¼‰</span></span><br><span class="line"><span class="comment">//new Promise((resolve, reject) =&gt; &#123;</span></span><br><span class="line"><span class="comment">// if (err) &#123;</span></span><br><span class="line"><span class="comment">//       reject(err);</span></span><br><span class="line"><span class="comment">//      &#125;</span></span><br><span class="line"><span class="comment">//      resolve(data);</span></span><br><span class="line"><span class="comment">//  &#125;);</span></span><br><span class="line"><span class="comment">//throw new Error(&quot;Required&quot;); // æŠ›å‡ºä¸€ä¸ªæ–°çš„é”™è¯¯å¯¹è±¡</span></span><br><span class="line"><span class="meta">@HttpCode</span>(<span class="number">204</span>)</span><br><span class="line"><span class="comment">//ä¿®æ”¹å¤´éƒ¨</span></span><br><span class="line"><span class="meta">@Header</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;none&#x27;</span>)</span><br><span class="line"><span class="comment">//é‡å®šå‘é—®é¢˜ï¼šç¤ºä¾‹ï¼Œæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œurlå’ŒçŠ¶æ€ç ï¼Œä¹Ÿå¯ä»¥åœ¨æ–¹æ³•å†…è¿›è¡Œå®šå‘å¦‚ä¸‹</span></span><br><span class="line"><span class="meta">@Redirect</span>(<span class="string">&#x27;https://xxx.com&#x27;</span>, <span class="number">301</span>)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">create</span>(<span class="params"><span class="meta">@Body</span>() createUserDto: CreateUserDto</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">5</span> === <span class="string">&#x27;5&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">url</span>: <span class="string">&#x27;http://nestjs.inode.club/v5/&#x27;</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">create</span>(createUserDto);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="title function_">findAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">findAll</span>();</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// è·¯ç”±å‚æ•°ï¼Œè·å–ä¼ é€’çš„åŠ¨æ€æ•°æ®</span></span><br><span class="line">  <span class="meta">@Get</span>(<span class="string">&#x27;:id&#x27;</span>)</span><br><span class="line">  <span class="title function_">findOne</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&#x27;id&#x27;</span>) id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">findOne</span>(+id);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Patch</span>(<span class="string">&#x27;:id&#x27;</span>)</span><br><span class="line">  <span class="title function_">update</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&#x27;id&#x27;</span>) id: <span class="built_in">string</span>, <span class="meta">@Body</span>() updateUserDto: UpdateUserDto</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">update</span>(+id, updateUserDto);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Delete</span>(<span class="string">&#x27;:id&#x27;</span>)</span><br><span class="line">  <span class="title function_">remove</span>(<span class="params"><span class="meta">@Param</span>(<span class="string">&#x27;id&#x27;</span>) id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userService</span>.<span class="title function_">remove</span>(+id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></li>
<li>Microservice å¾®æœåŠ¡</li>
<li>GraphQL è§£æå™¨(ä»£ç ä¼˜å…ˆå’Œæ¨¡å¼ä¼˜å…ˆ)</li>
<li>WebSocket ç½‘å…³</li>
</ol>
<h3 id="2-1-ä½œç”¨åŸŸ"><a href="#2-1-ä½œç”¨åŸŸ" class="headerlink" title="2.1 ä½œç”¨åŸŸ"></a>2.1 ä½œç”¨åŸŸ</h3><blockquote>
<p>1.<a class="link"   href="https://developer.mozilla.org/zh-CN/docs/Glossary/Scope" >å¯¹äºJSä½œç”¨åŸŸï¼Œå¯çœ‹MDN <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br /><br>2.<a class="link"   href="https://nestjs.inode.club/fundamentals/injection-scopes#%E6%8F%90%E4%BE%9B%E8%80%85%E4%BD%9C%E7%94%A8%E5%9F%9F" >å¯¹äºnestçš„ä½œç”¨åŸŸï¼Œå¯è‡ªè¡Œæµè§ˆ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
</blockquote>
<ol>
<li>DEFAULTï¼šå•ä¸€å®ä¾‹åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«ã€‚å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸç›´æ¥ä¸åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸç›¸å…³è”ã€‚</li>
<li>REQUESTï¼šä¸ºæ¯ä¸ªä¼ å…¥è¯·æ±‚åˆ›å»ºä¸€ä¸ªè¯¥æä¾›è€…çš„æ–°å®ä¾‹ã€‚å®ä¾‹ä¼šåœ¨è¯·æ±‚å®Œæˆå¤„ç†åè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</li>
<li>TRANSIENT: ç¬æ€æä¾›è€…åœ¨ä¸åŒçš„æ¶ˆè´¹è€…ä¹‹é—´ä¸å…±äº«ã€‚æ¯ä¸ªæ³¨å…¥ç¬æ€æä¾›è€…çš„æ¶ˆè´¹è€…éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªæ–°çš„ã€ä¸“ç”¨çš„å®ä¾‹ã€‚</li>
</ol>
<h3 id="2-2-è¯·æ±‚è´Ÿè½½"><a href="#2-2-è¯·æ±‚è´Ÿè½½" class="headerlink" title="2.2 è¯·æ±‚è´Ÿè½½"></a>2.2 è¯·æ±‚è´Ÿè½½</h3><div class="highlight-container" data-rel="Ts"><figure class="iseeu highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨tséœ€è¦ç¡®å®šDTOï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰æ¨¡å¼ï¼ŒDTOæ˜¯ä¸€ä¸ªå®šä¹‰äº†æ•°æ®å°†å¦‚ä½•é€šè¿‡ç½‘ç»œå‘é€çš„å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">//ä¸ºä»€ä¹ˆä½¿ç”¨ç±»ï¼šç±»æ˜¯JavaScript ES6æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å®ƒä»¬åœ¨ç¼–è¯‘åçš„JavaScriptä¸­è¢«ä¿ç•™ä¸ºå®é™…å®ä½“ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºTypeScriptæ¥å£åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¢«åˆ é™¤ï¼ŒNestæ— æ³•åœ¨è¿è¡Œæ—¶å¼•ç”¨ã€‚</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CreateUserDTO</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">gender</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä½¿ç”¨æ—¶</span></span><br><span class="line"><span class="meta">@Post</span>()</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">create</span>(<span class="params"><span class="meta">@Body</span>() CreateUserDTO: CreateUserDTO</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;This action adds a new person&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="2-3-å¼‚å¸¸è¿‡æ»¤å™¨"><a href="#2-3-å¼‚å¸¸è¿‡æ»¤å™¨" class="headerlink" title="2.3 å¼‚å¸¸è¿‡æ»¤å™¨"></a>2.3 å¼‚å¸¸è¿‡æ»¤å™¨</h3><blockquote>
<p><a class="link"   href="https://developer.mozilla.org/zh-CN/docs/Glossary/Scope" >Nestæ¡†æ¶å†…ç½®äº†ä¸€ä¸ªå¼‚å¸¸å¤„ç†å±‚ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br /></p>
</blockquote>
]]></content>
      <categories>
        <category>nodeå­¦ä¹ ç¬”è®°</category>
      </categories>
  </entry>
</search>
